<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>INSTALL.rdoc</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='file' id='wrapper'>
      <div class='header'>
        <h1 class='name'>INSTALL.rdoc</h1>
        <div class='paths'>
          INSTALL.rdoc
        </div>
        <div class='last-update'>
          Last Update:
          <span class='datetime'>Mon Apr 16 15:54:12 +0300 2012</span>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <h1 id="label-Installation">Installation</h1>
            
            <h2 id="label-Requirements">Requirements</h2>
            
            <h3 id="label-JRuby">JRuby</h3>
            
            <p>First of all, this software requires JRuby, as it interfaces with the Java
            client library of the Handle System. JRuby can be installed in many ways.
            You can go to the <a target="_top" href="http://jruby.org/">JRuby web site</a> and
            download it from there. The developers of this software prefer using the <a
            href="http://beginrescueend.com/">Ruby Version Manager (RVM)</a> for
            managing multiple Ruby installations on a single machine, and for managing
            multiple gemsets.</p>
            
            <p>After installing JRuby, make sure that the interpreter runs in <em>1.9</em>
            <em>mode</em>. This is done by adding option <code>--1.9</code> to
            environment variable <code>JRUBY_OPTS</code>. If you use <code>RVM</code>,
            you might consider using an <code>.rvmrc</code> document. There’s an
            example of such a document in the distribution, by executing</p>
            
            <pre>rvm rvmrc</pre>
            
            <p>inside the root of this distribution.</p>
            
            <h3 id="label-Handle+System+v7">Handle System v7</h3>
            
            <p>You’ll need a running Handle System installation. Details can be found at
            the <a target="_top" href="http://www.handle.net/">Handle System web site</a>.</p>
            
            <p>The web service needs to know the location of your Handle System
            installation. Create a symbolic link inside the Web Service top level
            directory called <code>hsj</code>, pointing to +$HS_DISTRO_ROOT/lib+.</p>
            
            <h3 id="label-Sequel">Sequel</h3>
            
            <p>Sequel is a Ruby database abstraction layer and Object-Relational Mapper
            (ORM). For performance reasons, we don’t use the ORM features.</p>
            
            <p>Installing <code>sequel</code> is easy:</p>
            
            <pre>gem install sequel</pre>
            
            <p>Depending on the kind of database you’re using underneath the Handle
            System, you’ll probably need to install some database handler as well.
            The service developers use gem <code>jdbc-mysql</code> in order to connect
            to their MySQL databases.</p>
            
            <h3 id="label-Rack">Rack</h3>
            
            <p>If you don’t know what Rack is, read the <a
            href="http://rack.rubyforge.org/doc/SPEC.html">Rack interface
            specification</a> and <a target="_top" href="http://rack.rubyforge.org/doc/">other
            documentation</a> to find out. It’s important.</p>
            
            <pre>gem install rack&#x000A;gem install rack-protection</pre>
            
            <h2 id="label-Configuration">Configuration</h2>
            
            <p>The web service comes preconfigured for HTTP Digest authentication.
            You’ll need to create two configuration files for this to work, though:</p>
            
            <h3 id="label-General+configuration">General configuration</h3>
            
            <p>The default installation expects some configuration information in file
            <code>config.rb</code>. You’ll find a sample configuration file called
            <code>config.rb.example</code> in the distribution. Copy or rename this
            file to <code>config.rb</code> and edit it to your situation:</p>
            
            <pre>cp -a config.rb.example config.rb&#x000A;$EDITOR config.rb</pre>
            
            <h3 id="label-User+accounts">User accounts</h3>
            
            <p>In the default configuration, account information is expected in file
            <code>secrets/users.rb</code>. From the installation root, do the
            following:</p>
            
            <pre>cd secrets/&#x000A;cp -a users.rb.example users.rb&#x000A;$EDITOR users.rb</pre>
            
            <h2 id="label-Running%21">Running!</h2>
            
            <p>At this point, you should be able to start the web service:</p>
            
            <pre>rackup</pre>
            
            <p>By default, this will start a Webrick web server, listening to port 9292.</p>
            
            <p>If you’d like to use another web server, another port number, another
            authentication method, then check out the Rack documentation, and start
            editing the rackup configuration file <code>config.ru</code>. That files
            contains a lot of in-line documentation that hopefully gets you started.</p>
          </div>
          <div id='context'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
